# .semaphore/semaphore.yml
version: v1.0
name: "Deploy website"
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804

blocks:
  - name: "Install dependencies"
    task:
      jobs:
      - name: HUGO install
        commands:
          - checkout
          - "curl -sSL https://github.com/gohugoio/hugo/releases/download/v0.53/hugo_0.53_Linux-64bit.tar.gz -o /tmp/hugo.tar.gz"
          - "echo \"0e4424c90ce5c7a0c0f7ad24a558dd0c2f1500256023f6e3c0004f57a20ee119  /tmp/hugo.tar.gz\" | sha256sum -c"
          - "mkdir -p /tmp/hugo"
          - "tar xf /tmp/hugo.tar.gz hugo -C /tmp/ && cp -r /tmp/hugo /usr/bin"
          - "hugo --baseURL https://hugotest-ff31.kxcdn.com"
